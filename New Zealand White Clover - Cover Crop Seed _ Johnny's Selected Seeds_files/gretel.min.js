"object"!=typeof JSON&&(JSON={}),function(){"use strict";var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta,rep;function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var r,o,i,n,c,a=gap,u=t[e];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(e)),"function"==typeof rep&&(u=rep.call(t,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,c=[],"[object Array]"===Object.prototype.toString.apply(u)){for(n=u.length,r=0;r<n;r+=1)c[r]=str(r,u)||"null";return i=0===c.length?"[]":gap?"[\n"+gap+c.join(",\n"+gap)+"\n"+a+"]":"["+c.join(",")+"]",gap=a,i}if(rep&&"object"==typeof rep)for(n=rep.length,r=0;r<n;r+=1)"string"==typeof rep[r]&&(i=str(o=rep[r],u))&&c.push(quote(o)+(gap?": ":":")+i);else for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(i=str(o,u))&&c.push(quote(o)+(gap?": ":":")+i);return i=0===c.length?"{}":gap?"{\n"+gap+c.join(",\n"+gap)+"\n"+a+"}":"{"+c.join(",")+"}",gap=a,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,r){var o;if(indent=gap="","number"==typeof r)for(o=0;o<r;o+=1)indent+=" ";else"string"==typeof r&&(indent=r);if((rep=t)&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var r,o,i=e[t];if(i&&"object"==typeof i)for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(void 0!==(o=walk(i,r))?i[r]=o:delete i[r]);return reviver.call(e,t,i)}if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e){"use strict";var x=e.CQuotient=window.CQuotient||(e.CQuotient={});x.VERSION="2.19.1";var O=0,N=[],R=!0,C=!1;function U(){return x.useTest?"staging.cquotient.com":"cquotient.com"}var j="__UNDEFINED__";function D(e){return null!=e&&e!==j}function n(e){var t=[];for(var r in e)if(e.hasOwnProperty(r)){if("sortDetails"===r){t.push(r+"::OMITTED_BY_GRETEL");continue}t.push(r+"::"+e[r])}return t.join("||")}function c(e){for(var t=[],r=0;r<e.length;r++){var o=e[r];"[object Object]"===Object.prototype.toString.call(o)?t.push(n(o)):t.push(o)}return t.join(";;")}function i(e){var t=new RegExp(["%23","%24","%26","%2B","%5E","%60","%7C","%2F","%3A","%3C","%3D","%3E","%3F","%40","%5B","%5D","%7B","%7D"].join("|"),"g"),r=encodeURIComponent(e);return r=r.replace(t,decodeURIComponent)}function _(e,t){var r=i(t.value)||"",o=i(e)+"="+r+";";t.domain&&(o+=" domain="+t.domain+";"),t.path&&(o+=" path="+t.path+";"),t.expires&&(o+=" expires="+t.expires+";"),document.cookie=o}x.byteLength=function(e){for(var t=e.length,r=0,o=e.length;r<o;r++){var i=e.charCodeAt(r);127<i&&i<=2047?t++:2047<i&&i<=65535&&(t+=2),55296<=i&&i<=56319&&r++}return t};var a={"},{":"-~-",'"id":':"i~%",',"sku":""':"s~!",',"sku":':"s~%"};function u(e){var t=JSON.stringify(e);for(var r in a)if(a.hasOwnProperty(r)){var o=new RegExp(r,"g");t=t.replace(o,a[r])}return i(t)}function A(t,e,r,o){try{window.sessionStorage.setItem("cq."+e,JSON.stringify(t))}catch(e){4e3<x.byteLength(u(t))+document.cookie.length?x.sendActivity(o,"error",{time:(new Date).getTime(),error:r+"  too large"}):_(r,{value:u(t),path:"/"})}}x._getTopDomain=function(e){var t,r,o="weird_get_top_level_domain=cookie",i=e.split(".");for(t=i.length-1;0<=t;t--)if(r=i.slice(t).join("."),document.cookie=o+";domain=."+r+";",-1<document.cookie.indexOf(o))return document.cookie=o.split("=")[0]+"=;domain=."+r+";expires=Thu, 01 Jan 1970 00:00:01 GMT;","."+r;return!1};var J=x._getTopDomain(document.location.hostname);function E(){try{for(var e=["cqcid","cquid","__cq_uuid","__cqact","__cqviews","__cq_bc","__cq_seg","__cq_anchor"],t=(e.length,document.cookie.split(";")),r=0,o=t.length;r<o;r++){var i=t[r],n=i.indexOf("="),c=(-1<n?i.substr(0,n):i).trim();-1!==e.indexOf(c)&&(document.cookie=c+"=; path=/; domain="+J+"; expires=Thu, 01 Jan 1970 00:00:00 GMT")}}catch(e){}}function P(e){var t=[];for(var r in e)if(e.hasOwnProperty(r)){var o=e[r],i=encodeURIComponent(r)+"=";"[object Object]"===Object.prototype.toString.call(o)?i+=encodeURIComponent(n(o)):"[object Array]"===Object.prototype.toString.call(o)?i+=encodeURIComponent(c(o)):i+=encodeURIComponent(o),t.push(i)}return t.join("&").length<1e3&&t.push("json="+encodeURIComponent(JSON.stringify(e))),t.join("&")}function M(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1").replace(/\+/g,"%20"))||null}function F(e){for(var t=document.cookie.split(";"),r=0,o=t.length;r<o;r++){var i=t[r].trim().split("=");if(0===i[0].indexOf(e))return i[1]}}function w(e){for(var t,r,o=[void 0],i="",n=document.location.hostname.split(".").reverse(),c=0,a=n.length;c<a;c++)i="."+n[c]+i,o.push(i);try{t=M(e)}catch(e){t=void 0}for(var u=0,s=o.length;u<s;u++){var d=o[u];_(e,{domain:d,path:"/",expires:"Thu, 01 Jan 1970 00:00:00 UTC"});try{r=M(e)}catch(e){r=void 0}if(t!==r)return _(e,{value:t,domain:d,path:"/"}),d}}function s(e){_(e,{path:"/",expires:"Thu, 01 Jan 1970 00:00:00 UTC",domain:w(e)})}function z(){var t,r;try{t=window.sessionStorage.getItem("cq.anchor")}catch(e){t=M("__cq_anchor")}try{r=JSON.parse(t)||{}}catch(e){r={}}return r}var L={customerSignup:["cookieId","userId","emailId"],viewPage:["cookieId","pageId"],viewProduct:["cookieId","product"],search:["cookieId","searchText"],viewSearch:["cookieId","searchText","products"],clickSearch:["cookieId","searchText","product"],viewCategory:["cookieId","categoryId"],clickCategory:["cookieId","categoryId"],viewCart:["cookieId","products"],addToCart:["cookieId","product"],removeFromCart:["cookieId","product"],beginCheckout:["cookieId","products","amount"],finishCheckout:["cookieId","products","amount"],reviewProduct:["cookieId","product","rating"],clickReco:["cookieId","product"],_clickReco:["cookieId","product"],viewWishList:["cookieId"],addToWishList:["cookieId"],removeFromWishList:["cookieId"],viewReco:["cookieId"],servedReco:[],error:[]};function B(e){var t,r;try{(t=M("__cq_bc"))||(t=M("bc")),t&&(t=t.replace(/^j:/,""),t=JSON.parse(t),(r={})[e]=t[e],r=JSON.stringify(r))}catch(e){}return r}function t(e,t){try{var r=window.sessionStorage.getItem("cq."+e);if(!r)return[];try{return JSON.parse(r)}catch(e){return[]}}catch(e){var o=M(t);return o?function(t){try{for(var e in a)if(a.hasOwnProperty(e)){var r=new RegExp(a[e],"g");t=t.replace(r,e)}return JSON.parse(t)}catch(e){return x.sendActivity("cq","error",{time:(new Date).getTime(),error:"Decoding failed on: "+t}),[]}}(o):[]}}function V(){return t("viewReco","__cqviews")}function Q(){return t("viewSearch","__cqsviews")}function $(){return t("viewCategory","__cqcviews")}var G={},W={};var Y={},H={};var Z={},K={};var X=V();try{window.sessionStorage.removeItem("cq.viewReco")}catch(e){document.cookie="__cqviews=;path=/;"}var ee=Q();try{window.sessionStorage.removeItem("cq.viewSearch")}catch(e){document.cookie="__cqsviews=;path=/;"}var te=null,re=$();try{window.sessionStorage.removeItem("cq.viewCategory")}catch(e){document.cookie="__cqcviews=;path=/;"}var oe=z();try{window.sessionStorage.removeItem("cq.anchor")}catch(e){s("__cq_anchor")}function d(e){return void 0!==e&&""!==e&&null!==e}var r={vgroup:"alt_id",set:"alt_id",bundle:"alt_id"};function l(e){if(e)return e[r[e.type]||"id"]}function ie(e,t){var r=l(e),o=l(t);return d(r)&&d(o)&&r===o}var ne=!1;function ce(){return!!M("__cq_uuid")}if(window.setTimeout(function(){ne||!x.clientId||x.activities&&0<x.activities.length||M("__cqact")||x.sendActivity(x.clientId,"viewPage",{cookieId:M("cqcid")})},1e3),x.sendActivity=function(e,t,r,o){if(-1!==document.cookie.indexOf("__cq_dnt=1"))return E(),new Image;if(!e)throw new Error("Must provide a clientId");if(!L.hasOwnProperty(t))throw new Error("Unsupported activity type!");if(ne=!0,r=r||{},"viewReco"===t){if(r.accumulate)return delete r.accumulate,c=e,(u=G[(a=r).recommenderName]=G[a.recommenderName]||[]).push(a.products),clearTimeout(W[a.recommenderName]),void(W[a.recommenderName]=window.setTimeout(function(){for(var e=[],t=0;t<u.length;t++)e=e.concat(u[t]);a.products=e,x.sendActivity(c,"viewReco",a);var r=V();r.push({recommenderName:a.recommenderName,cookieId:a.cookieId,userId:a.userId,products:a.products}),A(r,"viewReco","__cqviews",c)},0));var i=z(),n=r.recommenderName;i.hasOwnProperty(n)&&(r.anchors=i[n])}var c,a,u,s,d,l,p,f,v,m,g;if("clickSearch"===t&&(te=r),"viewSearch"===t&&r.accumulate)return delete r.accumulate,s=e,l=""+(d=r).searchText+d.imageUUID,(p=Y[l]=Y[l]||[]).push(d.products),clearTimeout(H[l]),void(H[l]=window.setTimeout(function(){for(var e=[],t=0;t<p.length;t++)e=e.concat(p[t]);d.products=e,x.sendActivity(s,"viewSearch",d),Y[l]=[];var r=Q(),o={refinements:d.refinements,cookieId:d.cookieId,userId:d.userId,products:d.products,personalized:d.personalized,sortingRule:d.sortingRule};D(d.searchText)&&(o.searchText=d.searchText),D(d.imageUUID)&&(o.imageUUID=d.imageUUID),r.push(o),A(r,"viewSearch","__cqsviews",s)},0));if("viewCategory"===t&&r.accumulate)return delete r.accumulate,f=e,m=(v=r).categoryId,(g=Z[m]=Z[m]||[]).push(v.products),clearTimeout(K[m]),void(K[m]=window.setTimeout(function(){for(var e=[],t=0;t<g.length;t++)e=e.concat(g[t]);v.products=e,x.sendActivity(f,"viewCategory",v),Z[m]=[];var r=$();r.push({refinements:v.refinements,categoryId:v.categoryId,cookieId:v.cookieId,userId:v.userId,products:v.products,personalized:v.personalized,sortingRule:v.sortingRule}),A(r,"viewCategory","__cqcviews",f)},0));if("viewProduct"===t){if("raw_sku"===r.product.type)return;!function(e,t){for(var r=0;r<X.length;r++)for(var o=X[r].products,i=0;i<o.length;i++)if(ie(o[i],t)){var n={recommenderName:X[r].recommenderName,product:t,cookieId:X[r].cookieId,userId:X[r].userId,anchors:oe[X[r].recommenderName]};return x.sendActivity(e,"_clickReco",n)}}(e,r.product),function(e,t){for(var r=0;r<ee.length;r++)for(var o=ee[r].products,i=0;i<o.length;i++)if(ie(o[i],t)){var n={refinements:ee[r].refinements,product:t,cookieId:ee[r].cookieId,userId:ee[r].userId,personalized:ee[r].personalized,sortingRule:ee[r].sortingRule};return D(ee[r].searchText)&&(n.searchText=ee[r].searchText),D(ee[r].imageUUID)&&(n.imageUUID=ee[r].imageUUID),x.sendActivity(e,"clickSearch",n)}}(e,r.product),function(e,t){for(var r=0;r<re.length;r++)for(var o=re[r].products,i=0;i<o.length;i++)if(ie(o[i],t)){var n={refinements:re[r].refinements,product:t,categoryId:re[r].categoryId,cookieId:re[r].cookieId,userId:re[r].userId,personalized:re[r].personalized,sortingRule:re[r].sortingRule};return x.sendActivity(e,"clickCategory",n)}}(e,r.product)}if("addToCart"===t&&te&&te.product.id===r.product.id&&(D(te.imageUUID)&&(r.imageUUID=te.imageUUID),D(te.searchText)&&(r.searchText=te.searchText)),!("clickReco"===t&&0<X.length)){var h=function(e){for(var t,r=window.location.search.substring(1).split("&"),o=0,i=r.length;o<i;o++){var n=r[o].split("=");if(decodeURIComponent(n[0])===e){t=decodeURIComponent(n[1]);break}}return t}("__cq_eid");h&&(r.emailId=h),"_clickReco"===t&&(t="clickReco"),r.searchText===j&&delete r.searchText,r.imageUUID===j&&delete r.imageUUID,r.referrer=window.document.referrer;var y=M("__cq_uuid");y&&(r.__cq_uuid=y);var _=M("__cq_seg");_&&(r.__cq_seg=_);var w=F("dwpersonalization_");w&&(r.__dw_p=w);var I="https://p."+U()+"/pebble?tla="+e+"&activityType="+t,k=B(e);k&&(r.bc=k),r.ls=function(){try{return window.localStorage.setItem("cq","cq"),window.localStorage.removeItem("cq"),!0}catch(e){return!1}}(),I+="&_="+(new Date).getTime();var T="_act_callback"+O++;I+="&callback=CQuotient."+T,r.v=x.VERSION;var b,S=P(r);if(0<S.length&&(I+="&"+S),!ce()&&!C){if(!R)return b={clientId:e,activityType:t,params:r,callback:o},void N.push(b);R=!1}var q=document.createElement("script");return q.src=I,q.type="text/javascript",x[T]=function(e){if("[object Object]"===Object.prototype.toString.call(e)&&(e=[e]),"[object Array]"===Object.prototype.toString.call(e))for(var t=0,r=e.length;t<r;t++)document.cookie=e[t].k+"="+e[t].v+";path=/;domain="+(J||e[t].d)+";max-age="+e[t].m;ce()||(C=!0),function(){for(var e=0,t=N.length;e<t;e++){var r=N[e];x.sendActivity(r.clientId,r.activityType,r.params,r.callback)}N=[]}(),delete x[T],q.parentNode.removeChild(q),o&&o()},document.getElementsByTagName("body")[0].appendChild(q),new Image}},x.clientId&&x.activities&&0<x.activities.length){for(var o=0;o<x.activities.length;o++){var p=x.activities[o];x.sendActivity(x.clientId,p.activityType,p.parameters)}x.activities=[]}function f(){if(x.clientId)try{var e=M("__cqact");if(!e)return void window.setTimeout(f,100);var t=JSON.parse(e);if(!t[0])return s("__cqact"),void window.setTimeout(f,100);x.sendActivity(x.clientId,t[0].activityType,t[0].parameters,function(){!function(e){try{var t=M("__cqact");if(!t)return f();for(var r=JSON.stringify(e.parameters.product||e.parameters.products),o=JSON.parse(t),i=w("__cqact"),n=0,c=o.length;n<c;n++)if(o[n].activityType===e.activityType&&JSON.stringify(o[n].parameters.product||o[n].parameters.products)===r){if(o.splice(n,1),_("__cqact",{value:JSON.stringify(o),domain:i,path:"/"}),JSON.parse(M("__cqact")).length===c)throw new Error("error deleting activity cookie");break}f()}catch(e){x.sendActivity(x.clientId,"error",{time:(new Date).getTime(),caughtError:e}),s("__cqact")}}(t[0])})}catch(e){x.sendActivity(x.clientId,"error",{time:(new Date).getTime(),caughtError:e}),s("__cqact")}}f();var I=["ipad","iphone","android","windows","mac"];var k={pdp:!0,topsellers:!0,v2v:!0};if(x.getRecs=function(r,e,o,i,n){var c=new Date;if(r)if(e){o=o||{};var t=M("__cq_uuid");t&&(o.__cq_uuid=t);var a=!1;for(var u in k)k.hasOwnProperty(u)&&0<=e.indexOf(u)&&(a=k[u]);var s,d=o.timeoutMs||5e3,l="_callback"+O++,p="recs/"+r+"/"+e+"?callback=CQuotient."+l;if(s=a?"r":(p+="&_="+(new Date).getTime(),"e"),o.filters){var f=o.filters;delete o.filters,f.fieldsToMatchToValue&&(o.filter_fieldsToMatchToValue=f.fieldsToMatchToValue)}e&&o.hasOwnProperty("anchors")&&function(e,t){if(e){var r=z(),o=t.map(function(e){return e.type&&"vgroup"===e.type&&e.alt_id?e.alt_id:e.id});r[e]=o;var i=JSON.stringify(r);try{window.sessionStorage.setItem("cq.anchor",i)}catch(e){_("__cq_anchor",{value:i,domain:w("__cq_anchor"),path:"/"})}}}(e,o.anchors),o.v=x.VERSION,p+="&_device="+function(e){e=e.toLowerCase();for(var t=0;t<I.length;t++){var r=I[t];if(0<=e.indexOf(r))return r}return"other"}(navigator.userAgent);var v=B(r);v&&(o.bc=v);var m=P(o);0<m.length&&(p+="&"+m);var g=document.createElement("script");g.src="https://"+s+"."+U()+"/"+p,g.type="text/javascript";var h=window.setTimeout(function(){try{n&&n({errorMessage:"Reco request timed out for recommender: "+e})}finally{y()}},d);x[l]=function(t){try{if("[object Object]"===Object.prototype.toString.call(t))try{i(t)}catch(e){x.sendActivity(r,"error",{time:new Date-c,recoRequestParams:o,recoResponse:t,caughtError:e})}finally{x.sendActivity(r,"servedReco",{time:new Date-c,recommenderName:e,recoRequestParams:o,recoResponse:t})}else if(n)try{n(t)}finally{x.sendActivity(r,"error",{time:new Date-c,recoRequestParams:o,recoResponse:t})}}catch(e){x.sendActivity(r,"error",{time:new Date-c,recoRequestParams:o,recoResponse:t,caughtError:e})}finally{y()}},document.getElementsByTagName("body")[0].appendChild(g)}else n&&n({errorMessage:'Invalid value for "recommenderName":'+e});else n&&n({errorMessage:'Invalid value for "clientId":'+r});function y(){delete x[l],g.parentNode.removeChild(g),window.clearTimeout(h)}},x.autoSendActivities=function(){for(var e=F("dwanonymous_"),t=M("cquid"),r=document.querySelectorAll("[data-einstein-activity]"),o=0;o<r.length;o++){var i=r[o],n=i.getAttribute("data-einstein-activity");i.removeAttribute("data-einstein-activity");try{n=JSON.parse(n)}catch(e){x.sendActivity(x.clientId,"error",{time:(new Date).getTime(),caughtError:"Failed to parse activity data attribute: "+n})}var c=n.attributes;if(c.cookieId=e,c.userId=t,c.accumulate=!0,"addToCart"===n.activity)return void i.addEventListener("click",function(){x.sendActivity(x.clientId,n.activity,c)});x.sendActivity(x.clientId,n.activity,c)}},x.autoActivitiesEnabled&&(window.setTimeout(function(){x.autoSendActivities()},100),window.setInterval(function(){x.autoSendActivities()},3e3)),x.enableDNT=function(){_("__cq_dnt",{domain:J,value:1,expires:new Date(Date.now()+189216e5)}),E()},x.disableDNT=function(){_("__cq_dnt",{domain:J,value:0,expires:new Date(Date.now()+189216e5)})},x.clientId&&x.widgets&&0<x.widgets.length){for(var v=0;v<x.widgets.length;v++){var m=x.widgets[v];x.getRecs(x.clientId,m.recommenderName,m.parameters,m.callback,m.errorCallback)}x.widgets=[]}}("undefined"!=typeof module&&module.exports?exports:window);
